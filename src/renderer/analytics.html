<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'">
    <title>„Ç¢„Éä„É™„ÉÜ„Ç£„ÇØ„Çπ - NovelDrive</title>
    <link rel="stylesheet" href="./styles/common.css">
    <link rel="stylesheet" href="./styles/analytics.css">
</head>
<body>
    <div class="app-container">
        <!-- „Çµ„Ç§„Éâ„Éê„Éº -->
        <nav class="sidebar">
            <div class="app-title">
                <h1>NovelDrive</h1>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="./projects.html" data-page="projects">
                        <span class="icon">üìÅ</span>
                        <span>„Éó„É≠„Ç∏„Çß„ÇØ„Éà</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="./writing-editor.html" data-page="writing-editor">
                        <span class="icon">‚úçÔ∏è</span>
                        <span>Âü∑Á≠Ü„Ç®„Éá„Ç£„Çø</span>
                    </a>
                </li>
                <li class="nav-item active">
                    <a href="#" data-page="analytics">
                        <span class="icon">üìä</span>
                        <span>„Ç¢„Éä„É™„ÉÜ„Ç£„ÇØ„Çπ</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="./settings.html" data-page="settings">
                        <span class="icon">‚öôÔ∏è</span>
                        <span>Ë®≠ÂÆö</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <main class="main-content">
            <header class="page-header">
                <div>
                    <h2>„Ç¢„Éä„É™„ÉÜ„Ç£„ÇØ„Çπ„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</h2>
                    <p class="page-description">Âü∑Á≠ÜÊ¥ªÂãï„ÅÆÁµ±Ë®à„Å®ÂàÜÊûê</p>
                </div>
                <div class="header-actions">
                    <select id="project-filter" class="project-selector">
                        <option value="all">„Åô„Åπ„Å¶„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà</option>
                    </select>
                    <select id="period-filter" class="period-selector">
                        <option value="week">‰ªäÈÄ±</option>
                        <option value="month" selected>‰ªäÊúà</option>
                        <option value="year">‰ªäÂπ¥</option>
                        <option value="all">ÂÖ®ÊúüÈñì</option>
                    </select>
                </div>
            </header>

            <div class="analytics-container">
                <!-- „Çµ„Éû„É™„Éº„Ç´„Éº„Éâ -->
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="card-icon">üìù</div>
                        <div class="card-content">
                            <div class="card-value" id="total-words">0</div>
                            <div class="card-label">Á∑èÊñáÂ≠óÊï∞</div>
                            <div class="card-trend positive">+12%</div>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="card-icon">üìÖ</div>
                        <div class="card-content">
                            <div class="card-value" id="writing-days">0</div>
                            <div class="card-label">Âü∑Á≠ÜÊó•Êï∞</div>
                            <div class="card-trend positive">+5Êó•</div>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="card-icon">‚è±Ô∏è</div>
                        <div class="card-content">
                            <div class="card-value" id="total-time">0h</div>
                            <div class="card-label">Âü∑Á≠ÜÊôÇÈñì</div>
                            <div class="card-trend negative">-2h</div>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="card-icon">üéØ</div>
                        <div class="card-content">
                            <div class="card-value" id="daily-average">0</div>
                            <div class="card-label">Êó•Âπ≥ÂùáÊñáÂ≠óÊï∞</div>
                            <div class="card-trend positive">+150</div>
                        </div>
                    </div>
                </div>

                <!-- „ÉÅ„É£„Éº„Éà„Ç®„É™„Ç¢ -->
                <div class="charts-grid">
                    <!-- Âü∑Á≠ÜÊé®Áßª„ÉÅ„É£„Éº„Éà -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Âü∑Á≠ÜÊé®Áßª</h3>
                            <div class="chart-controls">
                                <button class="chart-tab active" data-chart="words">ÊñáÂ≠óÊï∞</button>
                                <button class="chart-tab" data-chart="time">ÊôÇÈñì</button>
                                <button class="chart-tab" data-chart="sessions">„Çª„ÉÉ„Ç∑„Éß„É≥</button>
                            </div>
                        </div>
                        <div class="chart-body">
                            <canvas id="writing-trend-chart"></canvas>
                        </div>
                    </div>

                    <!-- „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂà•Áµ±Ë®à -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂà•Áµ±Ë®à</h3>
                        </div>
                        <div class="chart-body">
                            <canvas id="project-stats-chart"></canvas>
                        </div>
                    </div>

                    <!-- Âü∑Á≠Ü„Éë„Çø„Éº„É≥ -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Âü∑Á≠Ü„Éë„Çø„Éº„É≥</h3>
                        </div>
                        <div class="chart-body">
                            <div class="heatmap" id="writing-heatmap">
                                <!-- „Éí„Éº„Éà„Éû„ÉÉ„Éó„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                            </div>
                            <div class="heatmap-legend">
                                <span class="legend-label">Â∞ë„Å™„ÅÑ</span>
                                <div class="legend-gradient"></div>
                                <span class="legend-label">Â§ö„ÅÑ</span>
                            </div>
                        </div>
                    </div>

                    <!-- AI‰ΩøÁî®Áµ±Ë®à -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>AIÊ©üËÉΩ‰ΩøÁî®Áµ±Ë®à</h3>
                        </div>
                        <div class="chart-body">
                            <div class="ai-stats">
                                <div class="ai-stat-item">
                                    <div class="ai-stat-bar">
                                        <div class="ai-stat-fill" style="width: 75%"></div>
                                    </div>
                                    <div class="ai-stat-info">
                                        <span class="ai-stat-label">„Ç®„Éº„Ç∏„Çß„É≥„Éà‰ºöË≠∞</span>
                                        <span class="ai-stat-value">75Âõû</span>
                                    </div>
                                </div>
                                <div class="ai-stat-item">
                                    <div class="ai-stat-bar">
                                        <div class="ai-stat-fill" style="width: 60%"></div>
                                    </div>
                                    <div class="ai-stat-info">
                                        <span class="ai-stat-label">Âü∑Á≠ÜÊîØÊè¥</span>
                                        <span class="ai-stat-value">60Âõû</span>
                                    </div>
                                </div>
                                <div class="ai-stat-item">
                                    <div class="ai-stat-bar">
                                        <div class="ai-stat-fill" style="width: 45%"></div>
                                    </div>
                                    <div class="ai-stat-info">
                                        <span class="ai-stat-label">„Çª„É¨„É≥„Éá„Ç£„Éî„ÉÜ„Ç£Ê§úÁ¥¢</span>
                                        <span class="ai-stat-value">45Âõû</span>
                                    </div>
                                </div>
                                <div class="ai-stat-item">
                                    <div class="ai-stat-bar">
                                        <div class="ai-stat-fill" style="width: 30%"></div>
                                    </div>
                                    <div class="ai-stat-info">
                                        <span class="ai-stat-label">„Ç¢„Ç§„Éá„Ç¢„Ç¨„ÉÅ„É£</span>
                                        <span class="ai-stat-value">30Âõû</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ë©≥Á¥∞„ÉÜ„Éº„Éñ„É´ -->
                <div class="details-section">
                    <div class="section-header">
                        <h3>Âü∑Á≠Ü„Çª„ÉÉ„Ç∑„Éß„É≥Â±•Ê≠¥</h3>
                        <button class="export-btn" onclick="exportData()">
                            <span class="icon">üì§</span>
                            „Ç®„ÇØ„Çπ„Éù„Éº„Éà
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Êó•ÊôÇ</th>
                                    <th>„Éó„É≠„Ç∏„Çß„ÇØ„Éà</th>
                                    <th>Á´†</th>
                                    <th>ÊñáÂ≠óÊï∞</th>
                                    <th>ÊôÇÈñì</th>
                                    <th>ÁîüÁî£ÊÄß</th>
                                </tr>
                            </thead>
                            <tbody id="session-history">
                                <!-- „Çª„ÉÉ„Ç∑„Éß„É≥„Éá„Éº„Çø„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ÁõÆÊ®ôË®≠ÂÆö -->
                <div class="goals-section">
                    <div class="section-header">
                        <h3>Âü∑Á≠ÜÁõÆÊ®ô</h3>
                        <button class="primary-btn" onclick="showGoalModal()">
                            <span class="icon">‚ûï</span>
                            ÁõÆÊ®ô„ÇíË®≠ÂÆö
                        </button>
                    </div>
                    
                    <div class="goals-grid">
                        <div class="goal-card">
                            <div class="goal-header">
                                <h4>Êó•Ê¨°ÁõÆÊ®ô</h4>
                                <span class="goal-status active">ÈÄ≤Ë°å‰∏≠</span>
                            </div>
                            <div class="goal-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 65%"></div>
                                </div>
                                <div class="progress-text">1,300 / 2,000 ÊñáÂ≠ó</div>
                            </div>
                            <div class="goal-details">
                                <span>ÈÅîÊàêÁéá: 65%</span>
                                <span>ÊÆã„Çä: 700ÊñáÂ≠ó</span>
                            </div>
                        </div>
                        
                        <div class="goal-card">
                            <div class="goal-header">
                                <h4>ÈÄ±ÈñìÁõÆÊ®ô</h4>
                                <span class="goal-status warning">Ë¶ÅÊ≥®ÊÑè</span>
                            </div>
                            <div class="goal-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill warning" style="width: 40%"></div>
                                </div>
                                <div class="progress-text">8,000 / 20,000 ÊñáÂ≠ó</div>
                            </div>
                            <div class="goal-details">
                                <span>ÈÅîÊàêÁéá: 40%</span>
                                <span>ÊÆã„Çä: 12,000ÊñáÂ≠ó</span>
                            </div>
                        </div>
                        
                        <div class="goal-card">
                            <div class="goal-header">
                                <h4>ÊúàÈñìÁõÆÊ®ô</h4>
                                <span class="goal-status success">È†ÜË™ø</span>
                            </div>
                            <div class="goal-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill success" style="width: 80%"></div>
                                </div>
                                <div class="progress-text">64,000 / 80,000 ÊñáÂ≠ó</div>
                            </div>
                            <div class="goal-details">
                                <span>ÈÅîÊàêÁéá: 80%</span>
                                <span>ÊÆã„Çä: 16,000ÊñáÂ≠ó</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- ÁõÆÊ®ôË®≠ÂÆö„É¢„Éº„ÉÄ„É´ -->
    <div id="goal-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Âü∑Á≠ÜÁõÆÊ®ô„ÇíË®≠ÂÆö</h3>
                <button class="close-btn" onclick="closeGoalModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="goal-type">ÁõÆÊ®ô„Çø„Ç§„Éó</label>
                    <select id="goal-type">
                        <option value="daily">Êó•Ê¨°ÁõÆÊ®ô</option>
                        <option value="weekly">ÈÄ±ÈñìÁõÆÊ®ô</option>
                        <option value="monthly">ÊúàÈñìÁõÆÊ®ô</option>
                        <option value="project">„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÁõÆÊ®ô</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="goal-metric">Ê∏¨ÂÆöÊåáÊ®ô</label>
                    <select id="goal-metric">
                        <option value="words">ÊñáÂ≠óÊï∞</option>
                        <option value="time">Âü∑Á≠ÜÊôÇÈñì</option>
                        <option value="chapters">Á´†„ÅÆÂÆåÊàêÊï∞</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="goal-target">ÁõÆÊ®ôÂÄ§</label>
                    <input type="number" id="goal-target" min="1" placeholder="‰æã: 2000">
                </div>
                
                <div class="form-group">
                    <label for="goal-project">ÂØæË±°„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÔºà„Ç™„Éó„Ç∑„Éß„É≥Ôºâ</label>
                    <select id="goal-project">
                        <option value="">„Åô„Åπ„Å¶„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà</option>
                    </select>
                </div>
            </div>
            <div class="modal-actions">
                <button class="primary-btn" onclick="saveGoal()">‰øùÂ≠ò</button>
                <button class="secondary-btn" onclick="closeGoalModal()">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./js/analytics.js"></script>
</body>
</html>